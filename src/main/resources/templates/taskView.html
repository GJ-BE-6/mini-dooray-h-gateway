<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>테스크 세부내역</title>
</head>
<body>
<h1>테스크 세부내역</h1>
<div>
    <p><strong>테스크이름:</strong> <span th:text="${task.name}">task Name</span></p>
    <p><strong>테스크 상태 :</strong> <span th:text="${task.status}">task Status</span></p>
    <p><strong>테스크 내용 :</strong> <span th:text="${task.description}">task description</span></p>

    <p><strong>마일스톤 목록:</strong>
    <ul th:each="milestone : ${milestones}">
        <li th:text="${milestone.name}"></li>
        <li th:text="${milestone.startDate}"></li>
        <li th:text="${milestone.dueDate}"></li>
    </ul>
    <p><strong>태그 목록:</strong>
    <ul th:each="tag : ${tags}">
        <li th:text="${tag.name}"></li>
    </ul>

</div>
<div>
    <p><strong>코멘트 목록:</strong>
    <ul th:each="comment : ${comments}">
        <li th:text="${comment.userId}"></li>
        <li th:text="${comment.content}"></li>
    </ul>
    <p>코멘트 추가하기</p>
    <form th:action="@{/comments/tasks/{taskId}(taskid=${task.id})/comments}" method="post">
        <label for="id">멤버 아이디:</label>
        <input type="text" id="id" name="userId">
        <label for="content">코멘트 내용:</label>
        <input id="content" name="content"/>
        <button type="submit">코멘트 추가하기</button>
    </form>

</div>

<div>
    <p><strong>코멘트 목록:</strong></p>
    <ul th:each="comment : ${comments}">
        <li>
            <p><strong>작성자:</strong> <span th:text="${comment.userId}"></span></p>
            <p><strong>내용:</strong> <span th:text="${comment.content}"></span></p>
            <!-- 수정 버튼 -->
            <button th:onclick="'window.location.href=\'/comments/edit/' + ${comment.id} + '\';'">수정</button>
            <!-- 삭제 버튼 -->
            <form th:action="@{/comments/{commentId}(commentId=${comment.id})}" method="post" onsubmit="return confirm('정말 삭제하시겠습니까?');">
                <input type="hidden" name="_method" value="delete">
                <button type="submit">삭제</button>
            </form>
        </li>
    </ul>
    <p><strong>코멘트 추가하기</strong></p>
    <form th:action="@{/comments/tasks/{taskId}/comments(taskId=${task.id})}" method="post">
        <label for="userId">멤버 아이디:</label>
        <input type="text" id="userId" name="userId" required>
        <label for="content">코멘트 내용:</label>
        <input type="text" id="content" name="content" required>
        <button type="submit">코멘트 추가하기</button>
    </form>
</div>

</body>
</html>